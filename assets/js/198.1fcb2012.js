(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{606:function(s,t,a){"use strict";a.r(t);var e=a(12),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql事件"}},[s._v("#")]),s._v(" MySQL事件")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#事件是什么"}},[s._v("事件是什么")])]),a("li",[a("a",{attrs:{href:"#查看事件调度器"}},[s._v("查看事件调度器")])]),a("li",[a("a",{attrs:{href:"#开启事件调度器"}},[s._v("开启事件调度器")])]),a("li",[a("a",{attrs:{href:"#查看事件"}},[s._v("查看事件")])]),a("li",[a("a",{attrs:{href:"#查看事件创建语句"}},[s._v("查看事件创建语句")])]),a("li",[a("a",{attrs:{href:"#创建事件"}},[s._v("创建事件")]),a("ul",[a("li",[a("a",{attrs:{href:"#每隔一秒执行"}},[s._v("每隔一秒执行")])]),a("li",[a("a",{attrs:{href:"#每天凌晨1点执行"}},[s._v("每天凌晨1点执行")])]),a("li",[a("a",{attrs:{href:"#每隔一分钟执行"}},[s._v("每隔一分钟执行")])]),a("li",[a("a",{attrs:{href:"#指定时间范围内执行"}},[s._v("指定时间范围内执行")])]),a("li",[a("a",{attrs:{href:"#一小时后只执行一次"}},[s._v("一小时后只执行一次")])])])]),a("li",[a("a",{attrs:{href:"#修改事件"}},[s._v("修改事件")])]),a("li",[a("a",{attrs:{href:"#删除事件"}},[s._v("删除事件")])]),a("li",[a("a",{attrs:{href:"#开启事件"}},[s._v("开启事件")])]),a("li",[a("a",{attrs:{href:"#停止事件"}},[s._v("停止事件")])]),a("li",[a("a",{attrs:{href:"#启动定时器"}},[s._v("启动定时器")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"事件是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件是什么"}},[s._v("#")]),s._v(" 事件是什么")]),s._v(" "),a("blockquote",[a("p",[s._v("MySQL5.1版本开始引进event概念，MySQL中的事件(event：时间触发器)是用于执行定时或周期性的任务，类似Linux中的"),a("code",[s._v("crontab")]),s._v("，\n但是后者只能精确到分钟，事件可以精确到秒。")]),s._v(" "),a("p",[s._v("通过单独或调用存储过程使用，在某一特定的时间点，触发相关的SQL语句或存储过程。")]),s._v(" "),a("p",[s._v("事件由一个特定的线程来管理的，也就是所谓的事件调度器，但是事件不能直接调用。")])]),s._v(" "),a("blockquote",[a("p",[s._v("整个服务器重启、断电会导致event事件恢复成默认"),a("code",[s._v("OFF")]),s._v("关闭状态，需要在"),a("code",[s._v("mysql.ini")]),s._v("文件中修改加入"),a("code",[s._v("event_scheduler = ON")])])]),s._v(" "),a("h2",{attrs:{id:"查看事件调度器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看事件调度器"}},[s._v("#")]),s._v(" 查看事件调度器")]),s._v(" "),a("blockquote",[a("p",[s._v("MySQL中调度器"),a("code",[s._v("event_scheduler")]),s._v("负责调用事件，也就是由全局变量"),a("code",[s._v("event_scheduler")]),s._v("的状态决定，它默认是"),a("code",[s._v("OFF")]),s._v(", 一般是"),a("code",[s._v("OFF")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VARIABLES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%event_scheduler%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"开启事件调度器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启事件调度器"}},[s._v("#")]),s._v(" 开启事件调度器")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" event_scheduler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("h2",{attrs:{id:"查看事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看事件"}},[s._v("#")]),s._v(" 查看事件")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" EVENTS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"查看事件创建语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看事件创建语句"}},[s._v("#")]),s._v(" 查看事件创建语句")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT event_name\n")])])]),a("h2",{attrs:{id:"创建事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建事件"}},[s._v("#")]),s._v(" 创建事件")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("EVERY")]),s._v("后面可以跟可选的"),a("code",[s._v("STARTS")]),s._v("和"),a("code",[s._v("ENDS")]),s._v("，指定事件开始和结束时间，在这个时间段内，时间定时执行。\n"),a("code",[s._v("STARTS")]),s._v("和"),a("code",[s._v("ENDS")]),s._v("可同时指定，或者只指定"),a("code",[s._v("STARTS")]),s._v("，或两者都不指定。")])]),s._v(" "),a("h3",{attrs:{id:"每隔一秒执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#每隔一秒执行"}},[s._v("#")]),s._v(" 每隔一秒执行")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("executed_every_second"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置触发点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用EVERY关键字指定时间间隔，每隔一秒执行")]),s._v("\n\tEVERY "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SECOND")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以设置这个事件是执行一次还是持久执行，默认为`NOT PRESERVE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 即默认的计划任务执行完毕后自动drop该事件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION PRESERVE \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可是设置该事件创建后状态是否开启或关闭，默认为`ENABLE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以给该事件加上注释，最大长度64个字节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"每隔一秒执行"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"每天凌晨1点执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#每天凌晨1点执行"}},[s._v("#")]),s._v(" 每天凌晨1点执行")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("1_am_every_day"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置触发点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用EVERY关键字指定时间间隔，每天启动时间")]),s._v("\n\tEVERY "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DAY")]),s._v(" STARTS DATE_ADD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DATE_ADD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CURDATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DAY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HOUR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以设置这个事件是执行一次还是持久执行，默认为`NOT PRESERVE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 即默认的计划任务执行完毕后自动drop该事件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION PRESERVE \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可是设置该事件创建后状态是否开启或关闭，默认为`ENABLE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以给该事件加上注释，最大长度64个字节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"每天凌晨1点执行"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"每隔一分钟执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#每隔一分钟执行"}},[s._v("#")]),s._v(" 每隔一分钟执行")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("executed_every_minute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置触发点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用EVERY关键字指定时间间隔，每隔一分钟执行")]),s._v("\n\tEVERY "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MINUTE")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以设置这个事件是执行一次还是持久执行，默认为`NOT PRESERVE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 即默认的计划任务执行完毕后自动drop该事件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION PRESERVE \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可是设置该事件创建后状态是否开启或关闭，默认为`ENABLE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以给该事件加上注释，最大长度64个字节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"每隔一分钟执行"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"指定时间范围内执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定时间范围内执行"}},[s._v("#")]),s._v(" 指定时间范围内执行")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("1_am_every_range"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置触发点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用EVERY关键字指定时间间隔，每隔一分钟执行")]),s._v("\n\tEVERY "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MINUTE")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用STARTS关键字指定开始时间，当前时间一小时之后开始执行")]),s._v("\n\tSTARTS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HOUR")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用ENDS关键字指定结束时间，当前时间一个月后结束执行")]),s._v("\n\tENDS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MONTH")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以设置这个事件是执行一次还是持久执行，默认为`NOT PRESERVE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 即默认的计划任务执行完毕后自动drop该事件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION PRESERVE \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可是设置该事件创建后状态是否开启或关闭，默认为`ENABLE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以给该事件加上注释，最大长度64个字节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"每隔一分钟执行，指定开始时间和结束时间"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"一小时后只执行一次"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一小时后只执行一次"}},[s._v("#")]),s._v(" 一小时后只执行一次")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("after_hour_execute_once"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置触发点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用AT关键字指定只执行一次的时间，一小时后只执行一次")]),s._v("\n\tAT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HOUR")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以设置这个事件是执行一次还是持久执行，默认为`NOT PRESERVE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 即默认的计划任务执行完毕后自动drop该事件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION PRESERVE \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可是设置该事件创建后状态是否开启或关闭，默认为`ENABLE`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 可以给该事件加上注释，最大长度64个字节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"一小时后只执行一次"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"修改事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改事件"}},[s._v("#")]),s._v(" 修改事件")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" EVENT event_name\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SCHEDULE SCHEDULE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RENAME")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" new_event_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" COMPLETION "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" PRESERVE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'comment'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v(" sql_statement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h2",{attrs:{id:"删除事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除事件"}},[s._v("#")]),s._v(" 删除事件")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" EVENT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" event_name\n")])])]),a("h2",{attrs:{id:"开启事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启事件"}},[s._v("#")]),s._v(" 开启事件")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" EVENT event_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"停止事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止事件"}},[s._v("#")]),s._v(" 停止事件")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" EVENT event_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"启动定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动定时器"}},[s._v("#")]),s._v(" 启动定时器")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" EVENT event_remind_status "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v("    \nCOMPLETION PRESERVE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);