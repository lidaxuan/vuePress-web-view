(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{605:function(t,s,a){"use strict";a.r(s);var e=a(12),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[t._v("#")]),t._v(" MySQL")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#flag"}},[t._v("Flag")])]),a("li",[a("a",{attrs:{href:"#索引"}},[t._v("索引")])]),a("li",[a("a",{attrs:{href:"#常见问题"}},[t._v("常见问题")]),a("ul",[a("li",[a("a",{attrs:{href:"#group-concat"}},[t._v("GROUP_CONCAT")])]),a("li",[a("a",{attrs:{href:"#修改默认值大小"}},[t._v("修改默认值大小")])]),a("li",[a("a",{attrs:{href:"#自定义函数"}},[t._v("自定义函数")])]),a("li",[a("a",{attrs:{href:"#表名未忽略大小写"}},[t._v("表名未忽略大小写")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"flag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" Flag")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/topics/innodb",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/topics/innodb"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/topics/mysql",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/topics/mysql"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/phpmyadmin/phpmyadmin",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/phpmyadmin/phpmyadmin"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vrana/adminer",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/vrana/adminer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/xiaoheliu1024/p/12657929.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如果是MySQL引起的CPU消耗过大，你会如何优化？"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("全文搜索 "),a("a",{attrs:{href:"https://github.com/mengzhuo/sqlalchemy-fulltext-search",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/mengzhuo/sqlalchemy-fulltext-search"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/sql%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("MySQL优化工具")])]),t._v(" "),a("ul",[a("li",[t._v("压测 "),a("a",{attrs:{href:"https://github.com/topics/sysbench",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/topics/sysbench"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.52pojie.cn/thread-1502301-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mysql专栏 - 线上调优与压力测试"),a("OutboundLink")],1)])])])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/major/MySQLTuner-perl",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/major/MySQLTuner-perl"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/BMDan/tuning-primer.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/BMDan/tuning-primer.sh"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("pt-query-digest、pt-variable-advisor："),a("a",{attrs:{href:"https://www.percona.com/downloads/percona-toolkit/LATEST/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.percona.com/downloads/percona-toolkit/LATEST/"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.red-gate.com/products",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.red-gate.com/products"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.sqlgate.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.sqlgate.com"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.jetprofiler.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jetprofiler.com"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.solarwinds.com/zh/database-performance-monitoring-software",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.solarwinds.com/zh/database-performance-monitoring-software"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("高可用复制管理工具 "),a("a",{attrs:{href:"https://github.com/openark/orchestrator",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/openark/orchestrator"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("水平切片集群扩展 "),a("a",{attrs:{href:"https://github.com/vitessio/vitess",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/vitessio/vitess"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("strong",[t._v("MySql5.0以上字符串数据类型可以存的汉字个数")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/data-types.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.mysql.com/doc/refman/5.7/en/data-types.html"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("注意谨慎选择较大的存储数据类型")])]),t._v(" "),a("ul",[a("li",[t._v("UTF8MB4编码：一个汉字 = 4 个字节，英文是一个字节（bytes）")]),t._v(" "),a("li",[t._v("UTF8编码：一个汉字 = 3 个字节，英文是一个字节（bytes）")]),t._v(" "),a("li",[t._v("GBK编码： 一个汉字 = 2 个字节，英文是一个字节（bytes）")])]),t._v(" "),a("ul",[a("li",[t._v("在UTF8状态下 longtext : 4294967295/3=1431655765 个汉字，约14亿，存储空间占用：4294967295/1024/1024/1024=4G 的数据")]),t._v(" "),a("li",[t._v("在UTF8状态下 mediumtext : 16777215/3=5592405 个汉字，约560万，存储空间占用：16777215/1024/1024=16M 的数据")]),t._v(" "),a("li",[t._v("在UTF8状态下 text : 65535/3=21845个汉字，约20000，存储空间占用：65535/1024=64K 的数据")]),t._v(" "),a("li",[t._v("在UTF8状态下 tinytext : 256/3=85个汉字，存储空间占用：256 bytes")]),t._v(" "),a("li",[t._v("在UTF8MB4状态下 varchar ： (65535 - 2) / 4 = 16383 个汉字，英文也为 16383 个字符串，存储空间占用：64k")]),t._v(" "),a("li",[t._v("在UTF8状态下 varchar ： (65535 - 2) / 3 = 21844 个汉字，英文也为 21844 个字符串，存储空间占用：64k")]),t._v(" "),a("li",[t._v("在GBK状态下 varchar ： (65535 - 2) / 2 = 32766 个汉字，英文也为 32766 个字符串，存储空间占用：64k")])]),t._v(" "),a("blockquote",[a("p",[t._v("varchar 超过255个字节会有2字节的额外占用空间开销，所以减2，如果是255以下，则减1")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.51cto.com/arthur376/2121160",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql的varchar与text对比"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("strong",[t._v("通过分组聚合GROUP_CONCAT实现分析函数（开窗函数）")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/jishanwang/article/details/87179461",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mysql 分组聚合实现 over partition by 功能"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n  product_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  GROUP_CONCAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stock "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ORDER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stock "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DESC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" stocks\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" product_stock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" t\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" product_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("branch\n")])])]),a("h2",{attrs:{id:"索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[t._v("#")]),t._v(" 索引")]),t._v(" "),a("blockquote",[a("p",[t._v("索引是加速搜索引擎检索数据的一种特殊表查询。简单地说，索引是一个指向表中数据的指针。\n索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。\n建立索引会占用磁盘空间的索引文件。")])]),t._v(" "),a("blockquote",[a("p",[t._v("一个数据库中的索引与一本书的索引目录是非常相似的。\n拿汉语字典的目录页（索引）打比方，我们可以按拼音、笔画、偏旁部首等排序的目录（索引）快速查找到需要的字。")])]),t._v(" "),a("blockquote",[a("p",[t._v("索引有助于加快 SELECT 查询和 WHERE 子句，但它会减慢使用 UPDATE 和 INSERT 语句时的数据输入。索引可以创建或删除，但不会影响数据。\n使用 CREATE INDEX 语句创建索引，它允许命名索引，指定表及要索引的一列或多列，并指示索引是升序排列还是降序排列。\n索引也可以是唯一的，与 UNIQUE 约束类似，在列上或列组合上防止重复条目。")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-online-ddl-operations.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("在线DDL操作 - 官网"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/YangJiaXin/p/11153579.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 全文索引实现简单版搜索引擎"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://baijiahao.baidu.com/s?id=1641311517406582639",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql数据库的索引类型"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/guo_qiangqiang/article/details/88794971",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍mysql索引类型：FULLTEXT、NORMAL、SPATIAL、UNIQUE"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/csdnnhb2014/article/details/104466891",target:"_blank",rel:"noopener noreferrer"}},[t._v("MYSQL8.0全文索引使用"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 强制使用指定索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FORCE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("索引名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("从数据结构角度")])]),t._v(" "),a("ol",[a("li",[t._v("BTREE")]),t._v(" "),a("li",[t._v("HASH")])]),t._v(" "),a("p",[a("strong",[t._v("从物理存储角度")])]),t._v(" "),a("ol",[a("li",[t._v("聚集索引（clustered index）")]),t._v(" "),a("li",[t._v("非聚集索引（non-clustered index）")])]),t._v(" "),a("p",[a("strong",[t._v("从逻辑角度")])]),t._v(" "),a("ul",[a("li",[t._v("Normal（普通索引）")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" 索引名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" IndexName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Unique（唯一索引）")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" 索引名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("column_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("组合索引")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" 索引名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("On")]),t._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("字段名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" 索引名 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("SPATIAL（空间索引）")])]),t._v(" "),a("li",[a("p",[t._v("Full Text（全文索引）")])])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/fulltext-search-ngram.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ngram全文分析器 - 官网"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最小字符长度，默认是4，必须要匹配大于4的才会有返回结果")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("ft_min_word_len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存储在InnoDB的FULLTEXT索引中的最小词长")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("innodb_ft_min_token_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 中文检索分词插件，设置分词大小，取值范围是1到10,默认值是2，分词的SIZE越大,索引的体积就越大")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意位置必须放在全文索引的配置后面")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("ngram_token_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 查看所有全文索引相关参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),t._v(" VARIABLES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("LIKE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%ft%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),t._v(" VARIABLES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("LIKE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ngram_token_size'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tablename "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" FULLTEXT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("column1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/yyyxxxs/article/details/100079074",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL全文索引之布尔全文索引、查询扩展全文索引"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("MATCH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("column1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" AGAINST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 使用IN BOOLEAN MODE匹配不完整单词，默认IN NATURAL LANGUAGE MODE（自然语言模式）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("  表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("MATCH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("字段"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" AGAINST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'关键词'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BOOLEAN")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("MODE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("重新构建索引文件")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/rebuilding-tables.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("重建或修复表或索引 - 官网"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 对于InnoDB存储引擎的表无效")]),t._v("\nREPAIR "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("QUICK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- InnoDB对表进行索引的重新构建")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INNODB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 使用优化指令也可以起到同样的作用，同时这个指令会完成更多的优化作用。OPTIMIZE TABLE运行过程中，MySQL会锁定表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OPTIMIZE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" 表名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 执行之后会返回如下信息，但实际上是执行成功的")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- Table does not support optimize, doing recreate + analyze instead")]),t._v("\n")])])]),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("h3",{attrs:{id:"group-concat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#group-concat"}},[t._v("#")]),t._v(" GROUP_CONCAT")]),t._v(" "),a("ul",[a("li",[t._v("使用"),a("code",[t._v("GROUP_CONCAT")]),t._v("出现")])]),t._v(" "),a("blockquote",[a("p",[t._v("Row 147 was cut by GROUP_CONCAT()")])]),t._v(" "),a("ul",[a("li",[t._v("由于MySQL的"),a("code",[t._v("GROUP_CONCAT")]),t._v("有默认大小值，先查询一下")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" VARIABLES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("LIKE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'group_concat_max_len'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@global.group_concat_max_len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("默认值为1024")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Variable_name")]),t._v(" "),a("th",[t._v("Value")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("group_concat_max_len")]),t._v(" "),a("td",[t._v("1024")])])])]),t._v(" "),a("h3",{attrs:{id:"修改默认值大小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改默认值大小"}},[t._v("#")]),t._v(" 修改默认值大小")]),t._v(" "),a("ul",[a("li",[t._v("在MySQL配置文件中添加配置")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-1为最大值或根据实际需求设置长度")]),t._v("\ngroup_concat_max_len "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" -1\n")])])]),a("ul",[a("li",[t._v("如果是生产环境下，不能擅自重启MySQL服务，则可以通过语句设置"),a("code",[t._v("group_concat")]),t._v("的作用范围")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),t._v(" group_concat_max_len"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SESSION")]),t._v(" group_concat_max_len"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"自定义函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义函数"}},[t._v("#")]),t._v(" 自定义函数")]),t._v(" "),a("p",[a("strong",[t._v("执行自定义函数报错")])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)")])])]),t._v(" "),a("ul",[a("li",[t._v("查看是否开启"),a("code",[t._v("log_bin_trust_function_creators")])])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" VARIABLES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("LIKE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'log_bin_trust_function_creators'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@global.log_bin_trust_function_creators")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("默认关闭")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Variable_name")]),t._v(" "),a("th",[t._v("Value")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("log_bin_trust_function_creators")]),t._v(" "),a("td",[t._v("OFF")])])])]),t._v(" "),a("ul",[a("li",[t._v("开启")])]),t._v(" "),a("blockquote",[a("p",[t._v("在MySQL配置文件中"),a("code",[t._v("[mysqld]")]),t._v("节点下加上")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("log_bin_trust_function_creators")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("如果是生产环境下，不能擅自重启MySQL服务，则可以通过语句开启，重启后无效")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),t._v(" log_bin_trust_function_creators "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GLOBAL")]),t._v(" log_bin_trust_function_creators"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"表名未忽略大小写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表名未忽略大小写"}},[t._v("#")]),t._v(" 表名未忽略大小写")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/my.cnf\n")])])]),a("p",[a("strong",[t._v("在[mysqld]模块中添加")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("lower_case_table_names "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[a("strong",[t._v("保存并重启mysql")])])])}),[],!1,null,null,null);s.default=n.exports}}]);